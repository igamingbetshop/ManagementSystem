<div class="container">
  <div class="content-action">
    <div class="title"><a [routerLink]="['../../commonses']">{{'Bonuses.Commons' | translate}}</a> /: {{commonId}}</div>
    <button mat-stroked-button class="edit-btn" (click)="isEdit = true">{{'Common.Edit' | translate}}</button>
  </div>

  <div class="content-edit">
    <form class="grid-edit" [class.can-edit]="isEdit" [formGroup]="formGroup">
      <div>
        <div class="first-hand">{{'Common.Id' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Id}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput [formControlName]="'Id'" readonly>
          </mat-form-field>
        </div>
      </div>


      <div>
        <div class="first-hand">{{'Common.State' | translate}}</div>
        <div class="second-hand">{{ status[commonSettings?.Status - 1]?.Name}}</div>
        <div class="form-field form-dropdown">
          <mat-select
          [formControlName]="'Status'">
          <mat-option *ngFor="let state of status" [value]="state.Id">{{state.Name}}</mat-option>
        </mat-select>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Common.WinAccountTypeId' | translate}}</div>
        <div class="second-hand">{{ clientType[commonSettings?.WinAccountTypeId - 1]?.Name}}</div>
        <div class="form-field form-dropdown">
          <mat-select
          [formControlName]="'WinAccountTypeId'">
          <mat-option *ngFor="let type of clientType" [value]="type.Id">{{type.Name}}</mat-option>
        </mat-select>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Common.Name' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Name}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput [formControlName]="'Name'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId >= 10 && commonSettings?.BonusTypeId <= 14">
        <div class="first-hand">{{'Bonuses.ResetOnWithdraw' | translate}}</div>
        <div class="second-hand">{{commonSettings?.ResetOnWithdraw}}</div>
        <div class="form-field form-checkbox">
          <mat-checkbox [formControlName]="'ResetOnWithdraw'">{{'Bonuses.ResetOnWithdraw' | translate}}</mat-checkbox>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Partners.PartnerName' | translate}}</div>
        <div class="second-hand">{{commonSettings?.PartnerName}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput [formControlName]="'PartnerName'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.BonusWinMinAmount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.MinAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'MinAmount'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.AccountType' | translate}}</div>
        <div class="second-hand">{{accounttypeName}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'AccountTypeId'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.BonusWinMaxAmount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.MaxAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'MaxAmount'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.Priority' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Priority}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'Priority'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId == 10 || commonSettings?.BonusTypeId == 13">
        <div class="first-hand">{{'Bonuses.LinkedCampaign' | translate}}</div>
        <div class="second-hand">{{commonSettings?.LinkedCampaign}}</div>
        <div class="form-field form-checkbox">
          <mat-checkbox [formControlName]="'LinkedCampaign'">{{'Bonuses.LinkedCampaign' | translate}}</mat-checkbox>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId == 1 || commonSettings?.BonusTypeId == 3">
        <div class="first-hand">{{'Bonuses.PeriodInHours' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Period}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'Period'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId == 1 || commonSettings?.BonusTypeId == 3">
        <div class="first-hand">{{'Bonuses.Percent' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Percent}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'Percent'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.StartTime' | translate}}</div>
        <div class="second-hand">{{commonSettings?.StartTime | date:'dd/MM/yyyy HH:mm' }}</div>
        <div class="form-field form-calendar">
          <mat-form-field class="calendar-picker" appearance="none">
            <input matInput [ngxMatDatetimePicker]="pickerStart" [formControlName]="'StartTime'">
            <mat-datepicker-toggle matSuffix [for]="pickerStart">
              <div matDatepickerToggleIcon class="icon-calendar" aria-hidden="true" data-icon="&#xe909;"></div>
            </mat-datepicker-toggle>
            <ngx-mat-datetime-picker #pickerStart></ngx-mat-datetime-picker>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.FinishTime' | translate}}</div>
        <div class="second-hand">{{commonSettings?.FinishTime | date:'dd/MM/yyyy HH:mm'}}</div>
        <div class="form-field form-calendar">
          <mat-form-field class="calendar-picker" appearance="none">
            <input matInput [ngxMatDatetimePicker]="pickerEnd" [formControlName]="'FinishTime'">
            <mat-datepicker-toggle matSuffix [for]="pickerEnd">
              <div matDatepickerToggleIcon class="icon-calendar" aria-hidden="true" data-icon="&#xe909;"></div>
            </mat-datepicker-toggle>
            <ngx-mat-datetime-picker #pickerEnd></ngx-mat-datetime-picker>
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId >= 10 && commonSettings?.BonusTypeId <= 14">
        <div class="first-hand">{{'Bonuses.ValidForAwardingInHours' | translate}}</div>
        <div class="second-hand">{{commonSettings?.ValidForAwarding}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'ValidForAwarding'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Type' | translate}}</div>
        <div class="second-hand">{{commonSettings?.BonusTypeName}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="text" [value]="commonSettings?.BonusTypeName" readonly>
          </mat-form-field>
        </div>
      </div>


      <div *ngIf="commonSettings?.BonusTypeId >= 10 && commonSettings?.BonusTypeId <= 14">
        <div class="first-hand">{{'Bonuses.ValidForSpendingInHours' | translate}}</div>
        <div class="second-hand">{{commonSettings?.ValidForSpending}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'ValidForSpending'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.Sequence' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Sequence}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'Sequence'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.ReusingMaxCount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.ReusingMaxCount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'ReusingMaxCount'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.MaxGranted' | translate}}</div>
        <div class="second-hand">{{commonSettings?.MaxGranted}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'MaxGranted'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.TurnoverCount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.TurnoverCount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'TurnoverCount'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.MaxReceiversCount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.MaxReceiversCount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'MaxReceiversCount'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.TotalGranted' | translate}}</div>
        <div class="second-hand">{{commonSettings?.TotalGranted}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'TotalGranted'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.TotalReceiversCount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.TotalReceiversCount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'TotalReceiversCount'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId === 10 || commonSettings?.BonusTypeId === 13">
        <div class="first-hand">{{'Bonuses.PercentFromBonusAmount' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Percent}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'Percent'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.LinkedBonusId' | translate}}</div>
        <div class="second-hand">{{commonSettings?.LinkedBonusId}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'LinkedBonusId'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="commonSettings?.BonusTypeId === 10 || commonSettings?.BonusTypeId === 13">
        <div class="first-hand">{{'Bonuses.FreezeBonusBalance' | translate}}</div>
        <div class="second-hand">{{commonSettings?.FreezeBonusBalance}}</div>
        <div class="form-field form-checkbox">
          <mat-checkbox [formControlName]="'FreezeBonusBalance'">{{'Bonuses.FreezeBonusBalance' |
            translate}}</mat-checkbox>
        </div>
      </div>
      
      <div *ngIf="bonusTypeId == 10 ||  bonusTypeId == 13 ||  bonusTypeId == 11 ||  bonusTypeId == 12 ||  bonusTypeId == 14">
        <div class="first-hand">{{'Bonuses.Regularity' | translate}}</div>
        <div class="second-hand" >{{regularitys[commonSettings?.Regularity]?.Name}}</div>
        <div class="form-field form-dropdown">
          <mat-select [formControlName]="'Regularity'">
            <mat-option *ngFor="let regularity of regularitys" [value]="regularity.Id">{{regularity.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div *ngIf="bonusTypeId == 10 ||  bonusTypeId == 13 ||  bonusTypeId == 11 ||  bonusTypeId == 12 ||  bonusTypeId == 14">
        <div class="first-hand">{{'Bonuses.DayOfWeek' | translate}}</div>
        <div class="second-hand">{{days[commonSettings?.DayOfWeek]?.Name}}</div>
        <div class="form-field form-dropdown">
          <mat-select [formControlName]="'DayOfWeek'">
            <mat-option *ngFor="let day of days" [value]="day.Id">{{day.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div *ngIf="bonusTypeId == 10 ||  bonusTypeId == 13 ||  bonusTypeId == 11 ||  bonusTypeId == 12 ||  bonusTypeId == 14">
        <div class="first-hand">{{'Bonuses.ReusingMaxCountInPeriod' | translate}}</div>
        <div class="second-hand">{{commonSettings?.ReusingMaxCountInPeriod}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput type="number" [formControlName]="'ReusingMaxCountInPeriod'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="bonusTypeId != 1 && bonusTypeId != 14 && bonusTypeId != 12"></div>

      <div [class.group-left-item]="isEdit">
        <div class="first-hand">{{'Bonuses.ChooseCountries' | translate}}</div>
        <div class="second-hand" *ngIf="commonSettings?.Countries?.Type==1">
          {{'Bonuses.InSet' | translate}}
        </div>
        <div class="second-hand" *ngIf="commonSettings?.Countries?.Type==2">
          {{'Bonuses.OutOfSet' | translate}}
        </div>

        <div class="form-field form-checkbox" [formGroupName]="'Countries'">
          <input [value]="1" [formControlName]="'Type'" type="radio">{{'Bonuses.InSet' | translate}}
          <input [value]="2" style="margin-left: 5px;" [formControlName]="'Type'" type="radio">{{'Bonuses.OutOfSet' |
          translate}}
        </div>
      </div>

      <div [class.group-right-item]="isEdit">
        <div class="first-hand">{{'Clients.SelectCountry' | translate}}</div>
        <div class="second-hand" >
          <ng-container *ngFor="let country of countriesEntites">
            {{country}}
          </ng-container>
        </div>
        <div class="form-field form-dropdown" [formGroupName]="'Countries'">
          <mat-select [formControlName]="'Ids'" multiple>
            <mat-option *ngFor="let country of countries" [value]="country.Id">{{country.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div  [class.group-left-item]="isEdit">
        <div class="first-hand">{{'Bonuses.ChooseLanguages' | translate}}</div>
        <div class="second-hand" *ngIf="commonSettings?.Languages?.Type==1">
          {{'Bonuses.InSet' | translate}}
        </div>
        <div class="second-hand" *ngIf="commonSettings?.Languages?.Type==2">
          {{'Bonuses.OutOfSet' | translate}}
        </div>

        <div class="form-field form-checkbox" [formGroupName]="'Languages'">
          <input [value]="1" [formControlName]="'Type'" type="radio">{{'Bonuses.InSet' | translate}}
          <input [value]="2" style="margin-left: 5px;" [formControlName]="'Type'" type="radio">{{'Bonuses.OutOfSet' |
          translate}}
        </div>
      </div>

      <div [class.group-right-item]="isEdit">
        <div class="first-hand">{{'Clients.SelectLanguage' | translate}}</div>
        <div class="second-hand">
          <ng-container *ngFor="let language of languageEntites">
            {{languageEntites}}
          </ng-container>
        </div>
        <div class="form-field form-dropdown" [formGroupName]="'Languages'">
          <mat-select [formControlName]="'Names'" multiple>
            <mat-option *ngFor="let language of languages" [value]="language.Id">{{language.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div [class.group-left-item]="isEdit">
        <div class="first-hand">{{'Bonuses.ChooseSegment' | translate}}</div>
        <div class="second-hand" *ngIf="commonSettings?.SegmentIds?.Type==1">
          {{'Bonuses.InSet' | translate}}
        </div>
        <div class="second-hand" *ngIf="commonSettings?.SegmentIds?.Type==2">
          {{'Bonuses.OutOfSet' | translate}}
        </div>

        <div class="form-field form-checkbox" [formGroupName]="'SegmentIds'">
          <input [value]="1" [formControlName]="'Type'" type="radio">{{'Bonuses.InSet' | translate}}
          <input [value]="2" style="margin-left: 5px;" [formControlName]="'Type'" type="radio">{{'Bonuses.OutOfSet' |
          translate}}
        </div>
      </div>

      <div [class.group-right-item]="isEdit">
        <div class="first-hand">{{'Bonuses.SelectSegment' | translate}}</div>
        <div class="second-hand">
          <ng-container *ngFor="let segment of segmentesEntites">{{segment}}</ng-container>
        </div>
        <div class="form-field form-dropdown" [formGroupName]="'SegmentIds'">
          <mat-select [formControlName]="'Ids'" multiple>
            <mat-option *ngFor="let segment of segments" [value]="segment.Id">{{segment.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div [class.group-left-item]="isEdit">
        <div class="first-hand">{{'Bonuses.ChooseCurrency' | translate}}</div>
        <div class="second-hand" *ngIf="commonSettings?.Currencies?.Type==1">
          {{'Bonuses.InSet' | translate}}
        </div>
        <div class="second-hand" *ngIf="commonSettings?.Currencies?.Type==2">
          {{'Bonuses.OutOfSet' | translate}}
        </div>

        <div class="form-field form-checkbox" [formGroupName]="'Currencies'">
          <input [value]="1" [formControlName]="'Type'" type="radio">{{'Bonuses.InSet' | translate}}
          <input [value]="2" style="margin-left: 5px;" [formControlName]="'Type'" type="radio">{{'Bonuses.OutOfSet' |
          translate}}
        </div>
      </div>

      <div [class.group-right-item]="isEdit">
        <div class="first-hand">{{'Clients.SelectCurrency' | translate}}</div>
        <div class="second-hand">{{commonSettings?.Currencies.Names}}</div>
        <div class="form-field form-dropdown" [formGroupName]="'Currencies'">
          <mat-select [formControlName]="'Names'" multiple>
            <mat-option *ngFor="let Currency of currencies" [value]="Currency.Id">{{Currency.Name}}</mat-option>
          </mat-select>
        </div>
      </div>
      <div></div>

      <div>
        <label
          style="padding: 10px; display: inline-flex; align-items: center; border-radius: 5px;border: 1px solid  blue; width: 110px; cursor: pointer"
          for="file">{{'Bonuses.ManualUpload' | translate}}</label>
        <div style="display: none">
          <input id="file" type="file" (change)="uploadFile($event)">
        </div>
      </div>

      <div class="types">
        <div class="additionally" *ngIf="bonusTypeId === 12 || bonusTypeId === 13 ||bonusTypeId === 10 ">
          <mat-form-field>
            <mat-label>{{'Bonuses.SelectType' | translate}}</mat-label>
            <mat-select [(value)]="addedConditions.selectedGroupType"
              (selectionChange)="addedConditions.selectedGroupType = $event.value">
              <mat-option *ngFor="let name of addedConditions.groupTypes" [value]="name.Id">{{name.Name}}</mat-option>
            </mat-select>
          </mat-form-field>

          <div  class="condition-list" *ngFor="let condition of addedConditions.conditions;let index = index">
            <div>{{condition?.Condition?.Name}}</div>
            <div>{{condition?.ConditionType?.NickName}}</div>
            <div>{{condition?.ConditionValue}}</div>
            <mat-icon (click)="removeCondition(addedConditions, index)">close</mat-icon>
          </div>
          <div class="condition-action">
            <div class="selection-action">
              <mat-form-field>
                <mat-label>{{'Bonuses.SelectCondition' | translate}}</mat-label>
                <mat-select [ngModel]="addedConditions.selectedCondition"
                  (selectionChange)="addedConditions.selectedCondition = $event.value"
                  [ngModelOptions]="{standalone: true}">
                  <mat-option *ngFor="let name of conditions" [value]="name">{{name.Name}}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field>
                <mat-label>{{'Bonuses.SelectOperation' | translate}}</mat-label>
                <mat-select #selectedOperation [ngModel]="addedConditions.selectedConditionType"
                  (selectionChange)="addedConditions.selectedConditionType = selectedOperation.value"
                  [ngModelOptions]="{standalone: true}">
                  <mat-option *ngFor="let name of conditionTypes" [value]="name">{{name.NickName}}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field>
                <mat-label>{{'Bonuses.Value' | translate}}</mat-label>
                <input matInput type="text" [placeholder]="'Bonuses.Value' | translate"
                  [ngModel]="addedConditions.selectedConditionValue"
                  (ngModelChange)="this.addedConditions.selectedConditionValue = $event"
                  [ngModelOptions]="{standalone: true}">
              </mat-form-field>
            </div>

            <div class="btn-action">
              <button mat-stroked-button class="mat-btn" (click)="addCondition(addedConditions)"
                [class.disabled]="!addedConditions.selectedCondition || !addedConditions.selectedConditionType || !this.addedConditions.selectedConditionValue">
                {{'Common.Add' | translate}}
              </button>
              <button mat-stroked-button class="mat-btn" (click)="addGroup(addedConditions)">{{'Bonuses.AddGroup' |
                translate}}</button>
            </div>

          </div>

          <div *ngFor="let group of addedConditions.groups; let i = index" class="group-container">
            <mat-form-field>
              <mat-label>{{'Bonuses.SelectType' | translate}}</mat-label>
              <mat-select [ngModel]="group.selectedGroupType" (selectionChange)="group.selectedGroupType = $event.value"
                [ngModelOptions]="{standalone: true}">
                <mat-option *ngFor="let groupType of group.groupTypes"
                  [value]="groupType.Id">{{groupType.Name}}</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="condition-list" *ngFor="let condition of group.conditions">
              <div>{{condition.Condition.Name}}</div>
              <div>{{condition.ConditionType.NickName}}</div>
              <div>{{condition.ConditionValue}}</div>
              <mat-icon (click)="removeCondition(group, i)">close</mat-icon>
            </div>

            <div class="condition-action">

              <div class="selection-action">
                <mat-form-field>
                  <mat-label>{{'Bonuses.SelectCondition' | translate}}</mat-label>
                  <mat-select [ngModel]="group.selectedCondition"
                    (selectionChange)="group.selectedCondition = $event.value" [ngModelOptions]="{standalone: true}">
                    <mat-option value="" disabled>{{'Bonuses.SelectCondition' | translate}}</mat-option>
                    <mat-option *ngFor="let condition of conditions" [value]="condition">{{condition.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>{{'Bonuses.SelectOperation' | translate}}</mat-label>
                  <mat-select [ngModel]="group.selectedConditionType"
                    (selectionChange)="group.selectedConditionType = $event.value"
                    [ngModelOptions]="{standalone: true}">
                    <mat-option value="" disabled>{{'Bonuses.SelectOperation' | translate}}</mat-option>
                    <mat-option *ngFor="let conditionType of conditionTypes"
                      [value]="conditionType">{{conditionType.NickName}}</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <input matInput [placeholder]="'Value'" [ngModel]="group.selectedConditionValue"
                    (ngModelChange)="group.selectedConditionValue = $event" [ngModelOptions]="{standalone: true}">
                </mat-form-field>

              </div>

              <div class="btn-action">
                <button mat-stroked-button class="mat-btn" (click)="addCondition(group)"
                  [class.disabled]="!group.selectedCondition || !group.selectedConditionType || !group.selectedConditionValue">{{'Common.Add'
                  | translate}}
                </button>
                <button mat-stroked-button class="mat-btn" (click)="addGroup(group)">{{'Bonuses.AddGroup' |
                  translate}}</button>
                <button mat-stroked-button class="mat-btn"
                  (click)="removeGroup(addedConditions, i)">{{'Bonuses.RemoveGroup' | translate}}</button>
              </div>

            </div>
            <div *ngFor="let subgroup of group.groups" class="sub-group-container">
              <mat-form-field>
                <mat-label>Select</mat-label>
                <mat-select [ngModel]="subgroup.selectedGroupType"
                  (selectionChange)="subgroup.selectedGroupType = $event.value" [ngModelOptions]="{standalone: true}">
                  <mat-option *ngFor="let groupType of subgroup.groupTypes"
                    [value]="groupType.Id">{{groupType.Name}}</mat-option>
                </mat-select>
              </mat-form-field>

              <div class="condition-list" *ngFor="let condition of subgroup.conditions; let i = index">
                <div>{{condition.Condition.Name}}</div>
                <div>{{condition.ConditionType.NickName}}</div>
                <div>{{condition.ConditionValue}}</div>
                <mat-icon style="cursor: pointer" (click)="removeCondition(subgroup, i)">close</mat-icon>
              </div>

              <div class="condition-action">
                <div class="selection-action sub-group">
                  <mat-form-field>
                    <mat-label>{{'Bonuses.SelectCondition' | translate}}</mat-label>
                    <mat-select [ngModel]="subgroup.selectedCondition"
                      (selectionChange)="subgroup.selectedCondition = $event.value"
                      [ngModelOptions]="{standalone: true}">
                      <mat-option value="" disabled>{{'Bonuses.SelectCondition' | translate}}</mat-option>
                      <mat-option *ngFor="let condition of conditions"
                        [value]="condition">{{condition.Name}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-label>{{'Bonuses.SelectOperation' | translate}}</mat-label>
                    <mat-select [ngModel]="subgroup.selectedConditionType"
                      (selectionChange)="subgroup.selectedConditionType = $event.value"
                      [ngModelOptions]="{standalone: true}">
                      <mat-option value="" disabled>{{'Bonuses.SelectOperation' | translate}}</mat-option>
                      <mat-option *ngFor="let conditionType of conditionTypes"
                        [value]="conditionType">{{conditionType.NickName}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput [placeholder]="'Value'" [ngModel]="subgroup.selectedConditionValue"
                      (ngModelChange)="subgroup.selectedConditionValue = $event" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                </div>
                <div class="btn-action">
                  <button mat-stroked-button class="mat-btn" (click)="addCondition(subgroup)"
                    [class.disabled]="!subgroup.selectedCondition || !subgroup.selectedConditionType || !subgroup.selectedConditionValue">{{'Common.Add'
                    | translate}}
                  </button>
                  <button mat-stroked-button class="mat-btn" (click)="removeGroup(group, i)">{{'Bonuses.RemoveGroup' |
                    translate}}</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <div class="actions" *ngIf="isEdit">
          <button mat-raised-button class="mat-btn" type="submit" (click)="onSubmit()">{{'Save' | translate}}</button>
          <button mat-raised-button class="mat-cancel-btn" (click)="this.isEdit = false;">{{'Cancel' |
            translate}}</button>
        </div>
      </div>
    </form>
  </div>

  <br>

  <div class="mat-table">
    <div class="content-action">
      <div class="title">{{'Bonuses.BonusCurrencySettings' | translate}}</div>
      <button mat-stroked-button class="mat-btn" (click)="onOpenCurrencySettings()">{{'Partners.AddCurrencySettings' |
        translate}}</button>
    </div>

    <app-currency-settings-component [dataSource]="this.commonSettings?.AmountSettings" [isNotUptoAmmount]="true"
      (dataSourceChange)="onAmmountSettingsChange($event)"></app-currency-settings-component>
  </div>

  <div class="content-action">
    <div class="title">{{'Common.History' | translate}}</div>
  </div>

  <div class="grid-content" >
    <ag-grid-angular 
      #agGrid class="ag-theme-balham" 
      [headerHeight]="33" 
      [suppressCopyRowsToClipboard]="true"
      [rowHeight]="42" 
      [rowData]="rowData" 
      [rowModelType]="rowModelType" 
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef" 
      [cacheBlockSize]="cacheBlockSize"
      (gridReady)="onGridReady($event)" 
      [ensureDomOrder]="true" 
      [enableCellTextSelection]="true"
      [getContextMenuItems]="getContextMenuItems" 
      rowSelection="single">
    </ag-grid-angular>
  </div>

</div>