<div class="container">
  <div class="content-action">
    <div class="title"><a [routerLink]="['../../triggers']">{{'Bonuses.Triggers' | translate}}</a> / :{{triggerId}}
    </div>
    <button mat-stroked-button class="edit-btn" (click)="isEdit = true">{{'Common.Edit' | translate}}</button>
  </div>

  <div class="content-edit">
    <form class="grid-edit" [class.can-edit]="isEdit" [formGroup]="formGroup">
      <div>
        <div class="first-hand">{{'Common.Id' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.Id}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput [formControlName]="'Id'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Partners.PartnerName' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.PartnerName}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput [value]="triggerSetting?.PartnerName" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Common.Name' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.Name}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input matInput [formControlName]="'Name'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.Percent' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.Percent}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'Percent'" required>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.Description' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.Description}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="text" matInput [formControlName]="'Description'" required>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.DayOfWeek' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.Day}}</div>
        <div class="form-field form-dropdown">
          <mat-select [formControlName]="'DayOfWeek'">
            <mat-option *ngFor="let day of days" [value]="day.Id">{{day.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.TranslationId' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.TranslationId}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'TranslationId'" readonly>
          </mat-form-field>
        </div>
      </div>

      <div
        *ngIf="triggerSetting?.Type == 1 || triggerSetting?.Type == 2 || triggerSetting?.Type == 3 || triggerSetting?.Type == 10">
        <div class="first-hand">{{'Bonuses.TotalWagerAmount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.MinAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'MinAmount'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Common.Type' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.TypeName}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="text" matInput [value]="triggerSetting?.TypeName" readonly>
          </mat-form-field>
        </div>
      </div>

      <div
        *ngIf="triggerSetting?.Type == 1 || triggerSetting?.Type == 2 || triggerSetting?.Type == 3 || triggerSetting?.Type == 10">
        <div class="first-hand">{{'Bonuses.UpToAmount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.MaxAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'MaxAmount'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="triggerSetting?.Type == 7">
        <div class="first-hand">{{'Bonuses.Sequence' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.Sequence}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'Sequence'">
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.StartTime' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.StartTime | date:'dd/MM/yyyy HH:mm' }}</div>
        <div class="form-field form-calendar">
          <mat-form-field class="calendar-picker" appearance="none">
            <input matInput [ngxMatDatetimePicker]="pickerStart" [formControlName]="'StartTime'">
            <mat-datepicker-toggle matSuffix [for]="pickerStart">
              <div matDatepickerToggleIcon class="icon-calendar" aria-hidden="true" data-icon="&#xe909;"></div>
            </mat-datepicker-toggle>
            <ngx-mat-datetime-picker #pickerStart></ngx-mat-datetime-picker>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.FinishTime' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.FinishTime | date:'dd/MM/yyyy HH:mm'}}</div>
        <div class="form-field form-calendar">
          <mat-form-field class="calendar-picker" appearance="none">
            <input matInput [ngxMatDatetimePicker]="pickerEnd" [formControlName]="'FinishTime'">
            <mat-datepicker-toggle matSuffix [for]="pickerEnd">
              <div matDatepickerToggleIcon class="icon-calendar" aria-hidden="true"></div>
            </mat-datepicker-toggle>
            <ngx-mat-datetime-picker #pickerEnd></ngx-mat-datetime-picker>
          </mat-form-field>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Bonuses.SegmentId' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.SegmentId}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'SegmentId'">
          </mat-form-field>
        </div>
      </div>

      <div
        *ngIf="triggerSetting?.Type == 1 || triggerSetting?.Type == 2 || triggerSetting?.Type == 3 || triggerSetting?.Type == 10">
        <div class="first-hand">{{'Bonuses.MinBetCount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.MinBetCount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'MinBetCount'">
          </mat-form-field>
        </div>
      </div>

      <div
        *ngIf="triggerSetting?.Type == 5 || triggerSetting?.Type == 9 || triggerSetting?.Type == 11 || triggerSetting?.Type == 12">
        <div class="first-hand">{{'Payments.Amount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.MinAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'MinAmount'">
          </mat-form-field>
        </div>
      </div>

      <div
        *ngIf="triggerSetting?.Type == 4 || triggerSetting?.Type == 6 || triggerSetting?.Type == 7 || triggerSetting?.Type == 8">
        <div class="first-hand">{{'Bonuses.MinAmount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.MinAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'MinAmount'">
          </mat-form-field>
        </div>
      </div>

      <div
        *ngIf="triggerSetting?.Type == 4 || triggerSetting?.Type == 6 || triggerSetting?.Type == 7 || triggerSetting?.Type == 8">
        <div class="first-hand">{{'Bonuses.MaxAmount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.MaxAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="number" matInput [formControlName]="'MaxAmount'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="triggerSetting?.Type == 7 || triggerSetting?.Type == 8">
        <div class="first-hand">{{'Bonuses.UpToAmount' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.UpToAmount}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="text" matInput [formControlName]="'UpToAmount'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="triggerSetting?.Type == 2 || triggerSetting?.Type == 3">
        <div class="first-hand">{{'Bonuses.Source' | translate}}</div>
        <div class="second-hand">{{getSourceName(+triggerSetting?.BonusSettingCodes)}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="text" matInput [formControlName]="'BonusSettingCodes'">
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="triggerSetting?.Type == 4 || triggerSetting?.Type == 11 || triggerSetting?.Type == 12">
        <div class="first-hand">{{'Bonuses.BonusSettingCodes' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.BonusSettingCodes}}</div>
        <div class="form-field form-input">
          <mat-form-field appearance="none">
            <input type="text" matInput [formControlName]="'BonusSettingCodes'">
          </mat-form-field>
        </div>
      </div>

      <!-- <div *ngIf="triggerSetting?.Type == 7 || triggerSetting?.Type == 8">
        <div class="first-hand">{{'Payments.PaymentSystems' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.paymentSystems}}</div>
        <div class="form-field form-dropdown">
          <mat-select [formControlName]="'PaymentSystems'" multiple>
            <mat-option *ngFor="let payment of paymentSystems" [value]="payment.Id">{{payment.Name}}</mat-option>
          </mat-select>
        </div>
      </div> -->

      <div *ngIf="triggerSetting?.Type == 7 || triggerSetting?.Type == 8">
        <div class="first-hand">{{'Payments.PaymentSystems' | translate}}</div>
        <div class="second-hand" *ngIf="triggerSetting?.PaymentSystemIds?.Type!=1 &&
          triggerSetting?.PaymentSystemIds?.Type!=2 
        "></div>
        <div class="second-hand" *ngIf="triggerSetting?.PaymentSystemIds?.Type==1">
          {{'Bonuses.InSet' | translate}}
        </div>
        <div class="second-hand" *ngIf="triggerSetting?.PaymentSystemIds?.Type==2">
          {{'Bonuses.OutOfSet' | translate}}
        </div>

        <div class="form-field form-checkbox" [formGroupName]="'PaymentSystemIds'">
          <input [value]="1" [formControlName]="'Type'" type="radio">{{'Bonuses.InSet' | translate}}
          <input [value]="2" style="margin-left: 5px;" [formControlName]="'Type'" type="radio">{{'Bonuses.OutOfSet' |
          translate}}
        </div>
      </div>

      <div *ngIf="triggerSetting?.Type == 7 || triggerSetting?.Type == 8" style="height: auto;">
        <div class="first-hand">{{'Payments.PaymentSystems' | translate}}</div>
        <div class="second-hand" style="width: 600px; word-break: break-all">
          <span *ngFor="let payment of paymentEntites">{{payment}}</span>
        </div>
        <div class="form-field form-dropdown" [formGroupName]="'PaymentSystemIds'">
          <mat-select [formControlName]="'Ids'" multiple style="width: 600px;">
            <mat-option *ngFor="let payment of paymentSystems" [value]="payment.Id">{{payment.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div>
        <div class="first-hand">{{'Common.Status' | translate}}</div>
        <div class="second-hand">{{triggerSetting?.StatusName}}</div>
        <div class="form-field form-dropdown">
          <mat-select [formControlName]="'Status'">
            <mat-option *ngFor="let status of statuses" [value]="status.Id">{{status.Name}}</mat-option>
          </mat-select>
        </div>
      </div>

      <div></div>

      <div class="form-actions">

        <div class="actions" *ngIf="isEdit">
          <button mat-raised-button class="mat-btn" [disabled]="!formGroup.valid" (click)="submit()">{{'Common.Save' |
            translate}}
          </button>
          <button mat-raised-button class="mat-cancel-btn" (click)="this.isEdit = false;">{{'Common.Cancel' |
            translate}}</button>
        </div>
        <div class="actions" *ngIf="triggerSetting?.Type == 6" [ngSwitch]="triggerSetting?.Status">
          <div *ngSwitchCase="0">
            <button mat-raised-button class="mat-btn">{{'Bonuses.Accepted' | translate}}</button>
            <button mat-raised-button class="mat-cancel-btn" (click)="this.isEdit = false;">{{'Bonuses.Rejected' |
              translate}}</button>
          </div>
          <div *ngSwitchCase="1">
            <button mat-raised-button class="mat-btn" disabled>{{'Bonuses.Accepted' | translate}}</button>
          </div>
          <div *ngSwitchCase="2">
            <button mat-raised-button class="mat-cancel-btn" disabled>{{'Bonuses.Rejected' | translate}}</button>
          </div>
        </div>

      </div>

    </form>
  </div>
  <br>

  <div class="mat-table">
    <div class="content-action">
      <div class="title">{{'Bonuses.TriggerCurrencySettings' | translate}}</div>
      <button mat-stroked-button class="mat-btn" (click)="onOpenCurrencySettings()">{{'Partners.AddCurrencySettings' |
        translate}}</button>
    </div>

    <app-currency-settings-component [dataSource]="this.triggerSetting?.AmountSettings"
      (dataSourceChange)="onAmmountSettingsChange($event)"></app-currency-settings-component>
  </div>

  <div class="content-action">
    <div class="title">{{'Common.History' | translate}}</div>
  </div>

  <br>
  <div class="grid-content">
    <ag-grid-angular
      #agGrid
      class="ag-theme-balham"
      [headerHeight]="33"
      [rowHeight]="42"
      [suppressCopyRowsToClipboard]="true"
      [rowData]="rowData"
      [rowModelType]="rowModelType"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [sideBar]="sideBar"
      [cacheBlockSize]="cacheBlockSize"
      (gridReady)="onGridReady($event)"
      [ensureDomOrder]="true"
      [enableCellTextSelection]="true"
      [getContextMenuItems]="getContextMenuItems"
      rowSelection="single">
    </ag-grid-angular>
  </div>

</div>